div(layout="column", flex)
  div(layout-padding)
    md-chips(ng-model="consommations", md-autocomplete-snap="true", md-require-match="true")
      md-autocomplete(
        flex,
        md-autofocus,
        placeholder="Votre consommation",
        md-selected-item="conso.selected",
        md-search-text="conso.search",
        md-items="consommable in search(conso.search)",
        md-selected-item-change="selected(conso.selected)",
        md-min-length="0",
        md-no-cache="true",
        ng-keypress="keyPress($event)",
        ng-disabled="disabled"
        md-autoselect="true"
      )
        span {{consommable.nom}} : {{consommable.prix}}€
      md-chip-template
        span
          strong {{$chip.nom}}
          em  ({{$chip.prix}}€ x {{$chip.quantity}})
  md-list
    md-list-item.no-padding(ng-repeat="consommation in consommations track by $index")
      md-button.md-fab(md-no-ink) {{consommation.nom[0]}}
      h3(flex) {{consommation.nom}} : {{consommation.prix}} * 
        input(type="number", ng-model="consommation.quantity", min="0", ng-disabled="disabled")
        |  = {{consommation.prix*consommation.quantity | number:2}} €
      md-button.md-accent.md-fab(ng-click="add($index)")
        md-icon(aria-label="add one", md-svg-src="css/icons/ic_add_24px.svg")
      md-button.md-accent.md-fab(ng-click="supp($index)")
        md-icon(aria-label="delete", md-svg-src="css/icons/ic_delete_24px.svg")

  span(flex, ng-if="expand")

  md-button.md-primary.md-raised(ng-disabled="sum === 0 || disabled", ng-click="submit()") Payer {{sum | number:2}} €
